{"version":3,"sources":["playerStats.js"],"names":["getNewPlayer","playerId","_this","this","data","players","filter","item","player","id","parseInt","console","log","currentPlayer","findStatHolders","componentDiv","querySelectorAll","attributes","stats","forEach","stat","name","toLowerCase","value","goalsPerMatch","goals","appearances","passesPerMinute","fwd_pass","backward_pass","mins_played","selectedAttributes","i","innerHTML","first","last","info","position","src","alt","currentTeam","initPlayerStats","componentId","_this2","playerStats","document","getElementById","$","getJSON","done","undefined","selectList","addEventListener","e","target","selectOptions","fail","jqxhr","textStatus","error","err","components"],"mappings":"YAQA,SAASA,cAAaC,GAAU,GAAAC,GAAAC,IAC9BA,MAAKC,KAAKC,QAAQC,OAAO,SAACC,GACrBA,EAAKC,OAAOC,KAAOC,SAAST,KAC7BU,QAAQC,IAARV,EAAkBK,EAAKC,OAAOC,GAAIR,GAElCC,EAAKW,cAAgBN,EACrBI,QAAQC,IAARV,GACAA,EAAKY,gBAAkBZ,EAAKa,aAAaC,iBAAiB,sBAE1Dd,EAAKe,cACLf,EAAKW,cAAcK,MAAMC,QAAQ,SAACC,GAChClB,EAAKe,WAAYG,EAAKC,KAAMC,eAAiBF,EAAKG,QAGpDrB,EAAKe,WAAWO,cAAgBd,SAASR,EAAKe,WAAWQ,MAAMvB,EAAKe,WAAWS,YAAY,KAAK,IAChGxB,EAAKe,WAAWU,gBAAkBjB,UAAUR,EAAKe,WAAWW,SAAW1B,EAAKe,WAAWY,eAAe3B,EAAKe,WAAWa,YAAY,KAAK,IAEvI5B,EAAK6B,oBAAsB,cAAe,QAAS,cAAe,gBAAiB,mBAEnF7B,EAAKY,gBAAgBK,QAAQ,SAACZ,EAAMyB,GAClCzB,EAAKS,iBAAiB,cAAc,GAAGiB,UAAY/B,EAAKe,WAAWf,EAAK6B,mBAAmBC,KAAO,IAGpG9B,EAAKa,aAAaC,iBAAiB,MAAM,GAAGiB,UAAY/B,EAAKW,cAAcL,OAAOa,KAAKa,MAAQ,IAAMhC,EAAKW,cAAcL,OAAOa,KAAKc,KACpIjC,EAAKa,aAAaC,iBAAiB,MAAM,GAAGiB,UAAY/B,EAAKW,cAAcL,OAAO4B,KAAKC,SACvFnC,EAAKa,aAAaC,iBAAiB,OAAO,GAAGsB,IAAM,oBAAsBpC,EAAKW,cAAcL,OAAOC,GAAK,OACxGP,EAAKa,aAAaC,iBAAiB,OAAO,GAAGuB,IAAMrC,EAAKW,cAAcL,OAAOa,KAAKa,MAAQ,IAAMhC,EAAKW,cAAcL,OAAOa,KAAKc,KAC/HjC,EAAKa,aAAaC,iBAAiB,OAAO,GAAGsB,IAAM,kBAAoBpC,EAAKW,cAAcL,OAAOgC,YAAY/B,GAAK,OAClHP,EAAKa,aAAaC,iBAAiB,OAAO,GAAGuB,IAAMrC,EAAKW,cAAcL,OAAOgC,YAAYnB,QAK/F,QAASoB,iBAAgBxC,EAAUyC,GAAa,GAAAC,GAAAxC,IAE9CA,MAAKyC,YAAY7B,aAAe8B,SAASC,eAAeJ,GAExDK,EAAEC,QAAQ,2BACPC,KAAK,SAAC7C,GAGL,GAFAuC,EAAKC,YAAYxC,KAAOA,EAEe8C,SAAnCP,EAAKC,YAAY/B,cAA4B,CAC/C,GAAMsC,GAAaN,SAASC,eAAeJ,GAAa1B,iBAAiB,yBAAyB,EAClGmC,GAAWC,iBAAiB,SAAU,SAACC,GACrCV,EAAKC,YAAY5C,aAAaqD,EAAEC,OAAO/B,MAAOmB,KAEhDC,EAAKC,YAAY5C,aAAaC,EAAUyC,GAExC/B,QAAQC,IAAR+B,EAEA,IAAIY,GAAgB,EACpBnD,GAAKC,QAAQc,QAAQ,SAACf,GACpBmD,GAAAA,kBAAmCnD,EAAKI,OAAOC,GAA/C,KAAsDL,EAAKI,OAAOa,KAAKa,MAAvE,IAAgF9B,EAAKI,OAAOa,KAAKc,KAAjG,cAEFgB,EAAWlB,UAAYsB,KAG1BC,KAAK,SAACC,EAAOC,EAAYC,GACxB,GAAIC,GAAMF,EAAa,IAAMC,CAC7BhD,SAAQC,IAAK,mBAAqBgD,KAnExC,GAAMC,aACJpB,gBAAiBA,gBACjBG,aACExC,QACAJ,aAAcA,cAmElB6C,UAASO,iBAAiB,mBAAoB,WAC5CS,WAAWpB,gBAAgB,KAAM","file":"playerStats.js","sourcesContent":["const components = {\n  initPlayerStats: initPlayerStats,\n  playerStats: {\n    data: {},\n    getNewPlayer: getNewPlayer\n  }\n};\n\nfunction getNewPlayer(playerId) {\n  this.data.players.filter((item) => {\n    if(item.player.id === parseInt(playerId)) {\n      console.log(this, item.player.id, playerId);\n\n      this.currentPlayer = item;\n      console.log(this);\n      this.findStatHolders = this.componentDiv.querySelectorAll('section.playerStat');\n\n      this.attributes = {};\n      this.currentPlayer.stats.forEach((stat) => {\n        this.attributes[(stat.name).toLowerCase()] = stat.value;\n      });\n\n      this.attributes.goalsPerMatch = parseInt(this.attributes.goals/this.attributes.appearances*100)/100;\n      this.attributes.passesPerMinute = parseInt((this.attributes.fwd_pass + this.attributes.backward_pass)/this.attributes.mins_played*100)/100;\n\n      this.selectedAttributes = ['appearances', 'goals', 'goal_assist', 'goalsPerMatch', 'passesPerMinute'];\n\n      this.findStatHolders.forEach((item, i)=> {\n        item.querySelectorAll('.statValue')[0].innerHTML = this.attributes[this.selectedAttributes[i]] || 0;\n      });\n\n      this.componentDiv.querySelectorAll('h1')[0].innerHTML = this.currentPlayer.player.name.first + ' ' + this.currentPlayer.player.name.last;\n      this.componentDiv.querySelectorAll('h2')[0].innerHTML = this.currentPlayer.player.info.position;\n      this.componentDiv.querySelectorAll('img')[0].src = '/images/players/p' + this.currentPlayer.player.id + '.png';\n      this.componentDiv.querySelectorAll('img')[0].alt = this.currentPlayer.player.name.first + ' ' + this.currentPlayer.player.name.last;\n      this.componentDiv.querySelectorAll('img')[1].src = '/images/teams/t' + this.currentPlayer.player.currentTeam.id + '.png';\n      this.componentDiv.querySelectorAll('img')[1].alt = this.currentPlayer.player.currentTeam.name;\n    }\n  });\n}\n\nfunction initPlayerStats(playerId, componentId) {\n\n  this.playerStats.componentDiv = document.getElementById(componentId);\n\n  $.getJSON('/data/player-stats.json')\n    .done((data) => {\n      this.playerStats.data = data;\n\n      if (this.playerStats.currentPlayer === undefined){\n        const selectList = document.getElementById(componentId).querySelectorAll('select.playerSelector')[0];\n        selectList.addEventListener('change', (e) => {\n          this.playerStats.getNewPlayer(e.target.value, componentId);\n        });\n        this.playerStats.getNewPlayer(playerId, componentId);\n\n        console.log(this);\n\n        var selectOptions = '';\n        data.players.forEach((data) => {\n          selectOptions += `<option value=\"${data.player.id}\">${data.player.name.first} ${data.player.name.last}</option>`;\n        });\n        selectList.innerHTML = selectOptions;\n      }\n    })\n    .fail((jqxhr, textStatus, error) => {\n      var err = textStatus + ',' + error;\n      console.log( 'Request Failed: ' + err );\n    });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  components.initPlayerStats(4916, 'stats1');\n});\n"]}