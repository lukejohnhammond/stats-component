{"version":3,"sources":["playerStats.js"],"names":["player","data","i","item","stats","selectOptions","selectList","componentDiv","querySelectorAll","component","findStatHolders","selectedAttr","console","log","length","innerHTML","name","position","src","playerImage","alt","teamImage","teamName","checkPosition","pos","initPlayerStats","playerId","componentId","_this","this","document","getElementById","instance","$","getJSON","done","firstPlayerId","players","id","first","last","info","currentTeam","stat","toLowerCase","value","goalsPerMatch","parseInt","goals","appearances","passesPerMinute","fwd_pass","backward_pass","mins_played","addEventListener","e","target","getNewPlayer","fail","jqxhr","textStatus","error","err","components","playerStats"],"mappings":"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","file":"playerStats.js","sourcesContent":["const components = {\n  playerStats: {\n    initPlayerStats,\n    getNewPlayer,\n    checkPosition\n  }\n};\n\nfunction getNewPlayer(playerId, componentId) {\n  const component = this[componentId];\n  const componentDiv = component.componentDiv;\n  const player = component.data[playerId];\n\n  // get dom elems and set requested attrs\n  component.findStatHolders = componentDiv.querySelectorAll('section.playerStat');\n  component.selectedAttr = ['appearances', 'goals', 'goal_assist', 'goalsPerMatch', 'passesPerMinute'];\n\n  // populate attrs\n  console.log(component.findStatHolders);\n  for (let i = 0; i < component.findStatHolders.length; i++) {\n    const item = component.findStatHolders[i];\n    item.querySelectorAll('.statValue')[0].innerHTML = player[component.selectedAttr[i]] || 0;\n  }\n\n  // populate other dom elems as required\n  componentDiv.querySelectorAll('h1')[0].innerHTML = player.name;\n  componentDiv.querySelectorAll('h2')[0].innerHTML = player.position;\n  componentDiv.querySelectorAll('img')[0].src = player.playerImage;\n  componentDiv.querySelectorAll('img')[0].alt = player.name;\n  componentDiv.querySelectorAll('img')[1].src = player.teamImage;\n  componentDiv.querySelectorAll('img')[1].alt = player.teamName;\n}\n\nfunction checkPosition(pos) {\n  switch (pos) {\n    case 'D':\n      return 'Defender';\n    case 'M':\n      return 'Midfielder';\n    case 'F':\n      return 'Forward';\n  }\n}\n\nfunction initPlayerStats(playerId, componentId) {\n  this[componentId] = {\n    componentDiv: document.getElementById(componentId)\n  };\n  const instance = this[componentId];\n  const componentDiv = instance.componentDiv;\n\n  $.getJSON('/data/player-stats.json')\n    .done((data) => {\n      // Define some defaults\n      var selectOptions = '';\n      let firstPlayerId = 0;\n      instance.data = {};\n\n      // Log relevant info for each player\n      for (let i = 0;  i < data.players.length; i++) {\n        const item = data.players[i];\n        // Set first loaded player id\n        if(firstPlayerId === 0) firstPlayerId = item.player.id;\n\n        // Get attributes\n        instance.data[item.player.id] = {\n          name: item.player.name.first + ' ' + item.player.name.last,\n          position: this.checkPosition(item.player.info.position),\n          playerImage: '/images/players/p' + item.player.id + '.png',\n          teamImage: '/images/teams/t' + item.player.currentTeam.id + '.png',\n          teamName: item.player.currentTeam.name\n        };\n\n        // define object as player for easy reading\n        const player = instance.data[item.player.id];\n\n        // get player stats and reformat (to avoid missing and misaligned array values)\n        for (let i = 0;  i < item.stats.length; i++){\n          const stat = item.stats[i];\n          player[(stat.name).toLowerCase()] = stat.value;\n        }\n\n        player.goalsPerMatch = parseInt(player.goals/player.appearances*100)/100;\n        player.passesPerMinute = parseInt((player.fwd_pass + player.backward_pass)/player.mins_played*100)/100;\n\n        // write select options for dropdown\n        selectOptions += `<option value=\"${item.player.id}\">${item.player.name.first} ${item.player.name.last}</option>`;\n      }\n\n      // Set up select list and event listener\n      const selectList = componentDiv.querySelectorAll('select.playerSelector')[0];\n      selectList.addEventListener('change', (e) => {\n        if (parseInt(e.target.value) !== 0) this.getNewPlayer(e.target.value, componentId);\n      });\n      selectList.innerHTML = '<option value=\"0\">Select a player...</option>' + selectOptions;\n\n      // Populate first loaded player\n      this.getNewPlayer(firstPlayerId, componentId);\n    })\n    .fail((jqxhr, textStatus, error) => {\n      var err = textStatus + ',' + error;\n      console.log( 'Request Failed: ' + err );\n    });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  components.playerStats.initPlayerStats(4916, 'stats1');\n});\n"]}