{"version":3,"sources":["playerStats.js"],"names":["getNewPlayer","playerId","_this","this","findStatHolders","componentDiv","querySelectorAll","selectedAttributes","forEach","item","i","innerHTML","data","name","position","src","playerImage","alt","teamImage","teamName","checkPosition","pos","initPlayerStats","componentId","_this2","playerStats","document","getElementById","$","getJSON","done","selectOptions","firstPlayerId","players","player","id","first","last","info","currentTeam","stats","stat","toLowerCase","value","goalsPerMatch","parseInt","goals","appearances","passesPerMinute","fwd_pass","backward_pass","mins_played","undefined","currentPlayer","selectList","addEventListener","e","target","fail","jqxhr","textStatus","error","err","console","log","components"],"mappings":"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","file":"playerStats.js","sourcesContent":["const components = {\n  initPlayerStats: initPlayerStats,\n  playerStats: {\n    data: {},\n    getNewPlayer: getNewPlayer,\n    checkPosition\n  }\n};\n\nfunction getNewPlayer(playerId) {\n  this.findStatHolders = this.componentDiv.querySelectorAll('section.playerStat');\n\n  this.selectedAttributes = ['appearances', 'goals', 'goal_assist', 'goalsPerMatch', 'passesPerMinute'];\n\n  this.findStatHolders.forEach((item, i)=> {\n    item.querySelectorAll('.statValue')[0].innerHTML = this.data[playerId][this.selectedAttributes[i]] || 0;\n  });\n\n  this.componentDiv.querySelectorAll('h1')[0].innerHTML = this.data[playerId].name;\n  this.componentDiv.querySelectorAll('h2')[0].innerHTML = this.data[playerId].position;\n  this.componentDiv.querySelectorAll('img')[0].src = this.data[playerId].playerImage;\n  this.componentDiv.querySelectorAll('img')[0].alt = this.data[playerId].name;\n  this.componentDiv.querySelectorAll('img')[1].src = this.data[playerId].teamImage;\n  this.componentDiv.querySelectorAll('img')[1].alt = this.data[playerId].teamName;\n}\n\nfunction checkPosition(pos) {\n  switch (pos) {\n    case 'D':\n      return 'Defence';\n    case 'M':\n      return 'Midfield';\n    case 'F':\n      return 'Forward';\n  }\n}\n\nfunction initPlayerStats(playerId, componentId) {\n\n  this.playerStats.componentDiv = document.getElementById(componentId);\n\n  $.getJSON('/data/player-stats.json')\n    .done((data) => {\n      // this.playerStats.data = data;\n      var selectOptions = '';\n      let firstPlayerId = 0;\n      this.playerStats.data = {};\n      data.players.forEach((item) => {\n\n        if(firstPlayerId === 0) firstPlayerId = item.player.id;\n\n        this.playerStats.data[item.player.id] = {\n          name: item.player.name.first + ' ' + item.player.name.last,\n          position: this.playerStats.checkPosition(item.player.info.position),\n          playerImage: '/images/players/p' + item.player.id + '.png',\n          teamImage: '/images/teams/t' + item.player.currentTeam.id + '.png',\n          teamName: item.player.currentTeam.name\n        };\n\n        item.stats.forEach((stat) => {\n          this.playerStats.data[item.player.id][(stat.name).toLowerCase()] = stat.value;\n        });\n\n        this.playerStats.data[item.player.id].goalsPerMatch = parseInt(this.playerStats.data[item.player.id].goals/this.playerStats.data[item.player.id].appearances*100)/100;\n        this.playerStats.data[item.player.id].passesPerMinute = parseInt((this.playerStats.data[item.player.id].fwd_pass + this.playerStats.data[item.player.id].backward_pass)/this.playerStats.data[item.player.id].mins_played*100)/100;\n\n        selectOptions += `<option value=\"${item.player.id}\">${item.player.name.first} ${item.player.name.last}</option>`;\n      });\n\n      if (this.playerStats.currentPlayer === undefined){\n        const selectList = document.getElementById(componentId).querySelectorAll('select.playerSelector')[0];\n        selectList.addEventListener('change', (e) => {\n          this.playerStats.getNewPlayer(e.target.value, componentId);\n        });\n        this.playerStats.getNewPlayer(firstPlayerId, componentId);\n\n        selectList.innerHTML = selectOptions;\n      }\n    })\n    .fail((jqxhr, textStatus, error) => {\n      var err = textStatus + ',' + error;\n      console.log( 'Request Failed: ' + err );\n    });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  components.initPlayerStats(4916, 'stats1');\n});\n"]}